{"remainingRequest":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\ts-loader\\index.js??ref--14-3!C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\src\\js\\Utils.ts","dependencies":[{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\src\\js\\Utils.ts","mtime":1632856214378},{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9naW8vRGVza3RvcC93b3JrL2xpdmVuZXNzL2xpdmVuZXNzLWRldGVjdGlvbi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9naW8vRGVza3RvcC93b3JrL2xpdmVuZXNzL2xpdmVuZXNzLWRldGVjdGlvbi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmZyb20tZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8gQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQtMAppbXBvcnQgTG9nZ2VyIGZyb20gImpzLWxvZ2dlciI7CmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gInV1aWQiOwpleHBvcnQgdmFyIFV0aWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBVdGlscygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVdGlscyk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXRpbHMsIG51bGwsIFt7CiAgICBrZXk6ICJsb2FkQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQ29uZmlnKCkgewogICAgICB2YXIgZW52S2V5cyA9IE9iamVjdC5rZXlzKHByb2Nlc3MuZW52KTsKICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKTsKICAgICAgZW52S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChlbnZLZXkpIHsKICAgICAgICB2YXIga2V5ID0gZW52S2V5LnJlcGxhY2UoVXRpbHMuS0VZX1BSRUZJWCwgIiIpOwogICAgICAgIHZhciB2YWx1ZSA9IHByb2Nlc3MuZW52W2VudktleV07CiAgICAgICAgbWFwLnNldChrZXksIHZhbHVlKTsKICAgICAgfSk7CiAgICAgIHdpbmRvdy5jb25maWcgPSBPYmplY3QuZnJvbUVudHJpZXMobWFwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb25maWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZygpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5jb25maWc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29uZmlnQm9vbGVhblZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb25maWdCb29sZWFuVmFsdWUoY29uZmlnS2V5KSB7CiAgICAgIHJldHVybiAoLy8gQHRzLWlnbm9yZQogICAgICAgIFV0aWxzLmdldENvbmZpZygpW2NvbmZpZ0tleV0udHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09ICJ0cnVlIgogICAgICApOwogICAgfQogIH0sIHsKICAgIGtleTogImlzUHJvZmlsaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1Byb2ZpbGluZygpIHsKICAgICAgcmV0dXJuIFV0aWxzLmdldENvbmZpZ0Jvb2xlYW5WYWx1ZSgiUFJPRklMSU5HIik7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZmlndXJlTG9nZ2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb25maWd1cmVMb2dnZXIoKSB7CiAgICAgIExvZ2dlci51c2VEZWZhdWx0cygpOwoKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09ICJwcm9kdWN0aW9uIikgewogICAgICAgIExvZ2dlci5zZXRMZXZlbChMb2dnZXIuT0ZGKTsKICAgICAgfQoKICAgICAgd2luZG93LkxvZ2dlciA9IExvZ2dlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2FkTWVkaWFTdHJlYW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRNZWRpYVN0cmVhbShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHsKICAgICAgdmFyIGNvbnN0cmFpbnRzID0gewogICAgICAgIGF1ZGlvOiBmYWxzZSwKICAgICAgICB2aWRlbzogewogICAgICAgICAgd2lkdGg6IHBhcnNlSW50KFV0aWxzLmdldENvbmZpZygpLklNQUdFX1dJRFRIKSwKICAgICAgICAgIGhlaWdodDogcGFyc2VJbnQoVXRpbHMuZ2V0Q29uZmlnKCkuSU1BR0VfSEVJR0hUKSwKICAgICAgICAgIGZhY2luZ01vZGU6ICJ1c2VyIgogICAgICAgIH0KICAgICAgfTsKICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBtZWRpYVN0cmVhbUluZm8gPSB7CiAgICAgICAgICAgIG1lZGlhU3RyZWFtOiBtZWRpYVN0cmVhbSwKICAgICAgICAgICAgYWN0dWFsSGVpZ2h0OiBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmdldFNldHRpbmdzKCkuaGVpZ2h0LAogICAgICAgICAgICBhY3R1YWxXaWR0aDogbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5nZXRTZXR0aW5ncygpLndpZHRoCiAgICAgICAgICB9OwogICAgICAgICAgTG9nZ2VyLmluZm8oIm1lZGlhIGluZm86IGFjdHVhbEhlaWdodD0iLmNvbmNhdChtZWRpYVN0cmVhbUluZm8uYWN0dWFsSGVpZ2h0LCAiIGFjdHVhbFdpZHRoPSIpLmNvbmNhdChtZWRpYVN0cmVhbUluZm8uYWN0dWFsV2lkdGgpKTsKICAgICAgICAgIHdpbmRvdy5tZWRpYVN0cmVhbUluZm8gPSBtZWRpYVN0cmVhbUluZm87CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIExvZ2dlci5lcnJvcihlcnJvcik7CiAgICAgICAgICBlcnJvckNhbGxiYWNrKCJFcnJvciBnZXR0aW5nIHZpZGVvIGFjdHVhbCBzaXplcyIpOwogICAgICAgIH0KCiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIExvZ2dlci5lcnJvcihlcnJvcik7CiAgICAgICAgZXJyb3JDYWxsYmFjaygiRXJyb3IgZ2V0dGluZyBhY2Nlc3MgdG8gdGhlIGNhbWVyYSIpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRNZWRpYVN0cmVhbUluZm8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1lZGlhU3RyZWFtSW5mbygpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5tZWRpYVN0cmVhbUluZm87CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VXNlcklkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VySWQoKSB7CiAgICAgIHZhciB1c2VySWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOwoKICAgICAgaWYgKHVzZXJJZCA9PT0gbnVsbCkgewogICAgICAgIHVzZXJJZCA9IHV1aWR2NCgpOwogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcklkIiwgdXNlcklkKTsKICAgICAgfQoKICAgICAgTG9nZ2VyLmluZm8oInVzZXJJZD0iLmNvbmNhdCh1c2VySWQpKTsKICAgICAgcmV0dXJuIHVzZXJJZDsKICAgIH0KICB9XSk7CgogIHJldHVybiBVdGlsczsKfSgpOwpVdGlscy5LRVlfUFJFRklYID0gIlZVRV9BUFBfIjs="},{"version":3,"sources":["C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\gio\\Desktop\\work\\liveness\\liveness-detection\\client\\src\\js\\Utils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: MIT-0\r\n\r\nimport Logger from \"js-logger\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport interface Config {\r\n  DRAW_DETECTIONS: string;\r\n  PROFILING: string;\r\n  API_URL: string;\r\n  API_START_ENDPOINT: string;\r\n  API_VERIFY_ENDPOINT_PATTERN: string;\r\n  API_FRAMES_ENDPOINT_PATTERN: string;\r\n  IMAGE_WIDTH: string;\r\n  IMAGE_HEIGHT: string;\r\n  IMAGE_JPG_QUALITY: string;\r\n  STATE_AREA_DURATION_IN_SECONDS: string;\r\n  STATE_NOSE_DURATION_IN_SECONDS: string;\r\n  STATE_AREA_MAX_FRAMES_WITHOUT_FACE: string;\r\n  STATE_NOSE_MAX_FRAMES_WITHOUT_FACE: string;\r\n  MAX_FPS: string;\r\n  FACE_AREA_TOLERANCE_PERCENT: string;\r\n  FLIP_VIDEO: string;\r\n  LANDMARK_INDEX: string;\r\n}\r\n\r\nexport interface MediaStreamInfo {\r\n  mediaStream: MediaStream;\r\n  actualHeight: number;\r\n  actualWidth: number;\r\n}\r\n\r\nexport class Utils {\r\n  private static KEY_PREFIX = \"VUE_APP_\";\r\n\r\n  static loadConfig() {\r\n    const envKeys = Object.keys(process.env);\r\n    const map = new Map();\r\n    envKeys.forEach(function(envKey) {\r\n      const key = envKey.replace(Utils.KEY_PREFIX, \"\");\r\n      const value = process.env[envKey] as string;\r\n      map.set(key, value);\r\n    });\r\n    (window as any).config = Object.fromEntries(map);\r\n  }\r\n\r\n  static getConfig(): Config {\r\n    return (window as any).config as Config;\r\n  }\r\n\r\n  static getConfigBooleanValue(configKey: string): boolean {\r\n    return (\r\n      // @ts-ignore\r\n      Utils.getConfig()\r\n        [configKey].trim()\r\n        .toLowerCase() === \"true\"\r\n    );\r\n  }\r\n\r\n  static isProfiling(): boolean {\r\n    return Utils.getConfigBooleanValue(\"PROFILING\");\r\n  }\r\n\r\n  static configureLogger() {\r\n    Logger.useDefaults();\r\n    if (process.env.NODE_ENV == \"production\") {\r\n      Logger.setLevel(Logger.OFF);\r\n    }\r\n    (window as any).Logger = Logger;\r\n  }\r\n\r\n  static loadMediaStream(successCallback: () => void, errorCallback: (message: string) => void) {\r\n    const constraints: MediaStreamConstraints = {\r\n      audio: false,\r\n      video: {\r\n        width: parseInt(Utils.getConfig().IMAGE_WIDTH),\r\n        height: parseInt(Utils.getConfig().IMAGE_HEIGHT),\r\n        facingMode: \"user\"\r\n      }\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then(function(mediaStream: MediaStream) {\r\n        try {\r\n          const mediaStreamInfo = {\r\n            mediaStream: mediaStream,\r\n            actualHeight: mediaStream.getVideoTracks()[0].getSettings().height,\r\n            actualWidth: mediaStream.getVideoTracks()[0].getSettings().width\r\n          };\r\n          Logger.info(\r\n            `media info: actualHeight=${mediaStreamInfo.actualHeight} actualWidth=${mediaStreamInfo.actualWidth}`\r\n          );\r\n          (window as any).mediaStreamInfo = mediaStreamInfo;\r\n        } catch (error) {\r\n          Logger.error(error);\r\n          errorCallback(\"Error getting video actual sizes\");\r\n        }\r\n        successCallback();\r\n      })\r\n      .catch(function(error) {\r\n        Logger.error(error);\r\n        errorCallback(\"Error getting access to the camera\");\r\n      });\r\n  }\r\n\r\n  static getMediaStreamInfo(): MediaStreamInfo {\r\n    return (window as any).mediaStreamInfo as MediaStreamInfo;\r\n  }\r\n\r\n  static getUserId(): string {\r\n    let userId = window.localStorage.getItem(\"userId\");\r\n    if (userId === null) {\r\n      userId = uuidv4();\r\n      window.localStorage.setItem(\"userId\", userId);\r\n    }\r\n    Logger.info(`userId=${userId}`);\r\n    return userId;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}